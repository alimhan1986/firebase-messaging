{"version":3,"file":"plugin.cjs.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["/// <reference types=\"@capacitor/cli\" />\r\n/**\r\n * The importance level.\r\n *\r\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/android/app/NotificationManager#IMPORTANCE_DEFAULT)\r\n *\r\n * @since 1.4.0\r\n */\r\nexport var Importance;\r\n(function (Importance) {\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Min\"] = 1] = \"Min\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Low\"] = 2] = \"Low\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Default\"] = 3] = \"Default\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"High\"] = 4] = \"High\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Max\"] = 5] = \"Max\";\r\n})(Importance || (Importance = {}));\r\n/**\r\n * The notification visibility.\r\n *\r\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/androidx/core/app/NotificationCompat#VISIBILITY_PRIVATE())\r\n *\r\n * @since 1.4.0\r\n */\r\nexport var Visibility;\r\n(function (Visibility) {\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Secret\"] = -1] = \"Secret\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Private\"] = 0] = \"Private\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Public\"] = 1] = \"Public\";\r\n})(Visibility || (Visibility = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst FirebaseMessaging = registerPlugin('FirebaseMessaging', {\r\n    web: () => import('./web').then(m => new m.FirebaseMessagingWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { FirebaseMessaging };\r\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\r\nimport { deleteToken, getMessaging, getToken, isSupported as isSupportedInWeb, onMessage, } from 'firebase/messaging';\r\nexport class FirebaseMessagingWeb extends WebPlugin {\r\n    constructor() {\r\n        super();\r\n        isSupportedInWeb().then(supported => {\r\n            if (!supported) {\r\n                return;\r\n            }\r\n            const messaging = getMessaging();\r\n            onMessage(messaging, payload => this.handleNotificationReceived(payload));\r\n        });\r\n    }\r\n    async checkPermissions() {\r\n        const receive = this.convertNotificationPermissionToPermissionState(Notification.permission);\r\n        return {\r\n            receive,\r\n        };\r\n    }\r\n    async requestPermissions() {\r\n        const notificationPermission = await Notification.requestPermission();\r\n        const receive = this.convertNotificationPermissionToPermissionState(notificationPermission);\r\n        return {\r\n            receive,\r\n        };\r\n    }\r\n    async isSupported() {\r\n        const isSupported = await isSupportedInWeb();\r\n        return {\r\n            isSupported,\r\n        };\r\n    }\r\n    async getToken(options) {\r\n        const messaging = getMessaging();\r\n        const token = await getToken(messaging, {\r\n            vapidKey: options.vapidKey,\r\n            serviceWorkerRegistration: options.serviceWorkerRegistration,\r\n        });\r\n        return {\r\n            token,\r\n        };\r\n    }\r\n    async deleteToken() {\r\n        const messaging = getMessaging();\r\n        await deleteToken(messaging);\r\n    }\r\n    async getDeliveredNotifications() {\r\n        this.throwUnavailableError();\r\n    }\r\n    async removeDeliveredNotifications(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async removeAllDeliveredNotifications() {\r\n        this.throwUnavailableError();\r\n    }\r\n    async subscribeToTopic(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async unsubscribeFromTopic(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async createChannel(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async deleteChannel(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async listChannels() {\r\n        this.throwUnavailableError();\r\n    }\r\n    handleNotificationReceived(messagePayload) {\r\n        const notification = this.createNotificationResult(messagePayload);\r\n        const event = {\r\n            notification,\r\n        };\r\n        this.notifyListeners(FirebaseMessagingWeb.notificationReceivedEvent, event);\r\n    }\r\n    createNotificationResult(messagePayload) {\r\n        var _a, _b, _c;\r\n        const notification = {\r\n            body: (_a = messagePayload.notification) === null || _a === void 0 ? void 0 : _a.body,\r\n            data: messagePayload.data,\r\n            id: messagePayload.messageId,\r\n            image: (_b = messagePayload.notification) === null || _b === void 0 ? void 0 : _b.image,\r\n            title: (_c = messagePayload.notification) === null || _c === void 0 ? void 0 : _c.title,\r\n        };\r\n        return notification;\r\n    }\r\n    convertNotificationPermissionToPermissionState(permission) {\r\n        let state = 'prompt';\r\n        switch (permission) {\r\n            case 'granted':\r\n                state = 'granted';\r\n                break;\r\n            case 'denied':\r\n                state = 'denied';\r\n                break;\r\n        }\r\n        return state;\r\n    }\r\n    throwUnavailableError() {\r\n        throw this.unavailable('Not available on web.');\r\n    }\r\n}\r\nFirebaseMessagingWeb.notificationReceivedEvent = 'notificationReceived';\r\n//# sourceMappingURL=web.js.map"],"names":["Importance","Visibility","registerPlugin","WebPlugin","isSupportedInWeb","messaging","getMessaging","onMessage","getToken","deleteToken"],"mappings":"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"}