{"version":3,"file":"plugin.js","sources":["esm/definitions.js","esm/index.js","esm/web.js"],"sourcesContent":["/// <reference types=\"@capacitor/cli\" />\r\n/**\r\n * The importance level.\r\n *\r\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/android/app/NotificationManager#IMPORTANCE_DEFAULT)\r\n *\r\n * @since 1.4.0\r\n */\r\nexport var Importance;\r\n(function (Importance) {\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Min\"] = 1] = \"Min\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Low\"] = 2] = \"Low\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Default\"] = 3] = \"Default\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"High\"] = 4] = \"High\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Importance[Importance[\"Max\"] = 5] = \"Max\";\r\n})(Importance || (Importance = {}));\r\n/**\r\n * The notification visibility.\r\n *\r\n * For more details, see the [Android Developer Docs](https://developer.android.com/reference/androidx/core/app/NotificationCompat#VISIBILITY_PRIVATE())\r\n *\r\n * @since 1.4.0\r\n */\r\nexport var Visibility;\r\n(function (Visibility) {\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Secret\"] = -1] = \"Secret\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Private\"] = 0] = \"Private\";\r\n    /**\r\n     * @since 1.4.0\r\n     */\r\n    Visibility[Visibility[\"Public\"] = 1] = \"Public\";\r\n})(Visibility || (Visibility = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst FirebaseMessaging = registerPlugin('FirebaseMessaging', {\r\n    web: () => import('./web').then(m => new m.FirebaseMessagingWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { FirebaseMessaging };\r\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\r\nimport { deleteToken, getMessaging, getToken, isSupported as isSupportedInWeb, onMessage, } from 'firebase/messaging';\r\nexport class FirebaseMessagingWeb extends WebPlugin {\r\n    constructor() {\r\n        super();\r\n        isSupportedInWeb().then(supported => {\r\n            if (!supported) {\r\n                return;\r\n            }\r\n            const messaging = getMessaging();\r\n            onMessage(messaging, payload => this.handleNotificationReceived(payload));\r\n        });\r\n    }\r\n    async checkPermissions() {\r\n        const receive = this.convertNotificationPermissionToPermissionState(Notification.permission);\r\n        return {\r\n            receive,\r\n        };\r\n    }\r\n    async requestPermissions() {\r\n        const notificationPermission = await Notification.requestPermission();\r\n        const receive = this.convertNotificationPermissionToPermissionState(notificationPermission);\r\n        return {\r\n            receive,\r\n        };\r\n    }\r\n    async isSupported() {\r\n        const isSupported = await isSupportedInWeb();\r\n        return {\r\n            isSupported,\r\n        };\r\n    }\r\n    async getToken(options) {\r\n        const messaging = getMessaging();\r\n        const token = await getToken(messaging, {\r\n            vapidKey: options.vapidKey,\r\n            serviceWorkerRegistration: options.serviceWorkerRegistration,\r\n        });\r\n        return {\r\n            token,\r\n        };\r\n    }\r\n    async deleteToken() {\r\n        const messaging = getMessaging();\r\n        await deleteToken(messaging);\r\n    }\r\n    async getDeliveredNotifications() {\r\n        this.throwUnavailableError();\r\n    }\r\n    async removeDeliveredNotifications(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async removeAllDeliveredNotifications() {\r\n        this.throwUnavailableError();\r\n    }\r\n    async subscribeToTopic(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async unsubscribeFromTopic(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async createChannel(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async deleteChannel(_options) {\r\n        this.throwUnavailableError();\r\n    }\r\n    async listChannels() {\r\n        this.throwUnavailableError();\r\n    }\r\n    handleNotificationReceived(messagePayload) {\r\n        const notification = this.createNotificationResult(messagePayload);\r\n        const event = {\r\n            notification,\r\n        };\r\n        this.notifyListeners(FirebaseMessagingWeb.notificationReceivedEvent, event);\r\n    }\r\n    createNotificationResult(messagePayload) {\r\n        var _a, _b, _c;\r\n        const notification = {\r\n            body: (_a = messagePayload.notification) === null || _a === void 0 ? void 0 : _a.body,\r\n            data: messagePayload.data,\r\n            id: messagePayload.messageId,\r\n            image: (_b = messagePayload.notification) === null || _b === void 0 ? void 0 : _b.image,\r\n            title: (_c = messagePayload.notification) === null || _c === void 0 ? void 0 : _c.title,\r\n        };\r\n        return notification;\r\n    }\r\n    convertNotificationPermissionToPermissionState(permission) {\r\n        let state = 'prompt';\r\n        switch (permission) {\r\n            case 'granted':\r\n                state = 'granted';\r\n                break;\r\n            case 'denied':\r\n                state = 'denied';\r\n                break;\r\n        }\r\n        return state;\r\n    }\r\n    throwUnavailableError() {\r\n        throw this.unavailable('Not available on web.');\r\n    }\r\n}\r\nFirebaseMessagingWeb.notificationReceivedEvent = 'notificationReceived';\r\n//# sourceMappingURL=web.js.map"],"names":["Importance","Visibility","registerPlugin","WebPlugin","isSupportedInWeb","messaging","getMessaging","onMessage","getToken","deleteToken"],"mappings":"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"}